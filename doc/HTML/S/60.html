<HTML>
<HEAD>
<TITLE>src/vm/ObjectReference.cc</TITLE>
<META NAME='ROBOTS' CONTENT='NOINDEX,NOFOLLOW'>
<META NAME='GENERATOR' CONTENT='GLOBAL-4.0.1'>
<SCRIPT LANGUAGE=javascript>
<!--
self.defaultStatus = 'src/vm/ObjectReference.cc'
<!-- end of script -->
</SCRIPT>
</HEAD>
<BODY>
<A NAME=TOP><H2>src/vm/ObjectReference.cc</H2>
<I><FONT COLOR=green>/* [&lt;][&gt;]<A HREF=#13>[^]</A><A HREF=#41>[v]</A>[top]<A HREF=#BOTTOM>[bottom]</A><A HREF=../mains.html>[index]</A><A HREF=../help.html>[help]</A> */</FONT></I>
<HR>
<H2>DEFINITIONS</H2>
This source file includes following functions.
<OL>
<LI><A HREF=#13>ObjectReference_t</A>
<LI><A HREF=#25>getQualificationOffset</A>
<LI><A HREF=#29>getValueOffset</A>
<LI><A HREF=#33>getQualification</A>
<LI><A HREF=#37>getValue</A>
<LI><A HREF=#41>setValue</A>
</OL>
<HR>
<PRE>
<I><FONT COLOR=green>//$Id: ObjectReference.cc,v 1.6 2001/05/10 12:54:59 hempe Exp $</FONT></I>

<FONT COLOR=darkred>#include</FONT> "vm.hpp"

<B>void</B>* ObjectReference_t::<B>operator</B> <B>new</B>(size_t size, <B>void</B> *location)<FONT COLOR=blue>{</FONT>
  <B>return</B> location;
<FONT COLOR=blue>}</FONT>

<B>void</B> *ObjectReference_t::<B>operator</B> <B>new</B>(size_t size) <FONT COLOR=blue>{</FONT>
  <B>return</B> malloc(<B>sizeof</B>(ObjectReference_t));
<FONT COLOR=blue>}</FONT>

<A NAME=13>ObjectReference_t::<A HREF=../S/68.html#157>ObjectReference_t</A>(Pattern_t* qualification, Object_t* value)<FONT COLOR=blue>{</FONT>
<I><FONT COLOR=green>/* [&lt;]<A HREF=#25>[&gt;]</A>[^]<A HREF=#41>[v]</A><A HREF=#TOP>[top]</A><A HREF=#BOTTOM>[bottom]</A><A HREF=../mains.html>[index]</A><A HREF=../help.html>[help]</A> */</FONT></I>
  <I><FONT COLOR=green>//doing this-&gt;value = value;</FONT></I>
  <B>if</B>(value)<FONT COLOR=blue>{</FONT>
<A NAME=16>    <A HREF=../D/339.html>setVMReference</A>(<B>this</B>, (<B>void</B>**)&amp;(<B>this</B>-&gt;value), value);
  <FONT COLOR=blue>}</FONT>
  <I><FONT COLOR=green>//doing this-&gt;qualification = qualification;</FONT></I>
  <B>if</B>(qualification)<FONT COLOR=blue>{</FONT>
<A NAME=20>    <A HREF=../D/339.html>setVMReference</A>(<B>this</B>, (<B>void</B>**)&amp;(<B>this</B>-&gt;qualification), qualification);
  <FONT COLOR=blue>}</FONT>
<FONT COLOR=blue>}</FONT>


<A NAME=25><B>unsigned</B> <B>int</B> ObjectReference_t::<A HREF=../R/212.html>getQualificationOffset</A>(<B>void</B>) <FONT COLOR=blue>{</FONT>
<I><FONT COLOR=green>/* <A HREF=#13>[&lt;]</A><A HREF=#29>[&gt;]</A><A HREF=#13>[^]</A><A HREF=#41>[v]</A><A HREF=#TOP>[top]</A><A HREF=#BOTTOM>[bottom]</A><A HREF=../mains.html>[index]</A><A HREF=../help.html>[help]</A> */</FONT></I>
  <B>return</B> ((<B>unsigned</B> <B>int</B>)&amp;qualification - (<B>unsigned</B> <B>int</B>)<B>this</B>)/<B>sizeof</B>(<B>void</B>*);
<FONT COLOR=blue>}</FONT>

<A NAME=29><B>unsigned</B> <B>int</B> ObjectReference_t::<A HREF=../R/220.html>getValueOffset</A>(<B>void</B>) <FONT COLOR=blue>{</FONT>
<I><FONT COLOR=green>/* <A HREF=#25>[&lt;]</A><A HREF=#33>[&gt;]</A><A HREF=#13>[^]</A><A HREF=#41>[v]</A><A HREF=#TOP>[top]</A><A HREF=#BOTTOM>[bottom]</A><A HREF=../mains.html>[index]</A><A HREF=../help.html>[help]</A> */</FONT></I>
  <B>return</B> ((<B>unsigned</B> <B>int</B>)&amp;value - (<B>unsigned</B> <B>int</B>)<B>this</B>)/<B>sizeof</B>(<B>void</B>*);
<FONT COLOR=blue>}</FONT>

<A NAME=33>Pattern_t* ObjectReference_t::getQualification(<B>void</B>)<FONT COLOR=blue>{</FONT>
<I><FONT COLOR=green>/* <A HREF=#29>[&lt;]</A><A HREF=#37>[&gt;]</A><A HREF=#13>[^]</A><A HREF=#41>[v]</A><A HREF=#TOP>[top]</A><A HREF=#BOTTOM>[bottom]</A><A HREF=../mains.html>[index]</A><A HREF=../help.html>[help]</A> */</FONT></I>
  <B>return</B> qualification;
<FONT COLOR=blue>}</FONT>

<A NAME=37>Object_t* ObjectReference_t::<A HREF=../R/219.html>getValue</A>(<B>void</B>)<FONT COLOR=blue>{</FONT>
<I><FONT COLOR=green>/* <A HREF=#33>[&lt;]</A><A HREF=#41>[&gt;]</A><A HREF=#13>[^]</A><A HREF=#41>[v]</A><A HREF=#TOP>[top]</A><A HREF=#BOTTOM>[bottom]</A><A HREF=../mains.html>[index]</A><A HREF=../help.html>[help]</A> */</FONT></I>
  <B>return</B> value;
<FONT COLOR=blue>}</FONT>

<A NAME=41><B>void</B> ObjectReference_t::setValue(Object_t* obj)<FONT COLOR=blue>{</FONT>
<I><FONT COLOR=green>/* <A HREF=#37>[&lt;]</A>[&gt;]<A HREF=#13>[^]</A>[v]<A HREF=#TOP>[top]</A><A HREF=#BOTTOM>[bottom]</A><A HREF=../mains.html>[index]</A><A HREF=../help.html>[help]</A> */</FONT></I>
<FONT COLOR=darkred>#ifdef</FONT> NEW_STYLE_GC
  <B>if</B>(obj)<FONT COLOR=blue>{</FONT>
<A NAME=44>    <A HREF=../D/339.html>setVMReference</A>(<B>this</B>, (<B>void</B>**)&amp;value, obj);
  <FONT COLOR=blue>}</FONT> <B>else</B> <FONT COLOR=blue>{</FONT>
    value = 0;
  <FONT COLOR=blue>}</FONT>
<FONT COLOR=darkred>#else</FONT> <I><FONT COLOR=green>//NEW_STYLE_GC</FONT></I>
  setVMReference(<B>this</B>, (<B>void</B>**)&amp;value, obj);
<FONT COLOR=darkred>#endif</FONT>
<FONT COLOR=blue>}</FONT>
</PRE>
<HR>
<A NAME=BOTTOM>
<I><FONT COLOR=green>/* [&lt;][&gt;]<A HREF=#13>[^]</A><A HREF=#41>[v]</A><A HREF=#TOP>[top]</A>[bottom]<A HREF=../mains.html>[index]</A><A HREF=../help.html>[help]</A> */</FONT></I>
</BODY>
</HTML>
